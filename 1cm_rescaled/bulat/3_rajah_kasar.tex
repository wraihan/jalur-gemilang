% * Copyright 2025 Pn Wan Raihan, (https://wraihan.com)
% * Licensed under MIT (https://wraihanws.mit-license.org/)
% ===========================================
% Nota Tambahan Mengenai Penggunaan Perisian:
% -------------------------------------------
%% Kod ini dibangunkan menggunakan sistem pemprosesan dokumen ConTeXt yang dilesenkan di bawah GNU General Public License (GPL).
%% Namun begitu, kod ini ditulis secara bebas dan tidak mengandungi atau mengubah sebarang kod sumber daripada sistem ConTeXt.
%% Oleh itu, kod ini dianggap sebagai hasil asli penggunaan, dan dilesenkan secara berasingan di bawah Lesen MIT.
%% Sila rujuk pindaan lesen untuk syarat tambahan berkaitan Lesen MIT.
% ===========================================
% Additional Note Regarding Software Use:
% -------------------------------------------
%% This code was developed using the ConTeXt typesetting system, which is licensed under the GNU General Public License (GPL).
%% However, it was written independently and does not contain or modify any part of ConTeXtâ€™s source code.
%% Therefore, this code is considered an original work of use and is licensed separately under the MIT License.
%% See the amended license for additional terms concerning the MIT License.
% ===========================================

\setuppapersize[A4,landscape]
\setuppagenumbering[location={},style=bold]

\starttext

\startbuffer[rajah]
\startMPcode
  draw image (
    picture Jalur; Jalur := image (
      draw fullsquare xysized (14,8);
      path p; p := fullsquare xscaled 14 shifted (0,3.5);
      for i= 0 downto - 7: draw p shifted (14 ,i); endfor;
      for i=-8 downto -13: draw p shifted (3.5,i) xscaled 2; endfor;
    ) scaled 1cm; draw Jalur withpen pencircle scaled .25pt;

    path Bulan; Bulan := fullcircle scaled 6cm;
    draw Bulan shifted (-1.25cm,0);
    draw Bulan scaled .889 shifted (-.583cm,0); fill fullsquare xyscaled
      (1.7cm,5cm) shifted (1.34cm,0) withcolor white; %to hide the overlapping lines

    Ra=1cm; Rb=2.5cm; d=360; n=28; % Bintang %
    for i=0 step 2 until 26:
      draw ((Ra*cosd(d*i/n),Ra*sind(d*i/n)) --
	(Rb*cosd(d*(i+1)/n),Rb*sind(d*(i+1)/n)) --
	(Ra*cosd(d*(i+2)/n),Ra*sind(d*(i+2)/n))) shifted (1.75cm,0);
    endfor;
  ) scaled .75;
\stopMPcode
\stopbuffer

\getbuffer[rajah]

\page \setuppapersize[A4]
\setuptyping[margin=no,blank=halfline,option=lua,lines=normal]
\setupbodyfont[schola,11pt]
\hskip.2cm Kod lakaran (bulatan pada bahagian dalam anak bulan):
\blank[-1*small]
\color[red]{*}\tfx \color[blue]{Imej di atas yang terhasil daripada kod di bawah ini telah dikecilkan skalanya kepada 0.5cm per unit.}
\typebuffer[rajah]

\stoptext
